// Copyright 2025 The Outline Authors
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

apply plugin: 'com.android.library'
apply plugin: 'org.jetbrains.kotlin.android'

android {
    namespace "org.outline.capacitor"
    compileSdk rootProject.ext.compileSdkVersion

    defaultConfig {
        minSdkVersion rootProject.ext.minSdkVersion
    }

    buildTypes {
        release {
            minifyEnabled false
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    kotlinOptions {
        jvmTarget = "17"
    }
}

repositories {
    maven {
        // This is relative to $WORKSPACE/client/capacitor/android/
        url = uri("${rootProject.projectDir}/../../../output/client/android")
    }
    google()
    mavenCentral()
}

dependencies {
    implementation project(':capacitor-android')
    // From --include-build.
    implementation 'org.outline:outline:0.0'
    // From local Maven directory.
    implementation('org.getoutline.client:tun2socks:0.0.1') {
        exclude group: 'com.android.support'
    }
    // From public Maven.
    implementation 'io.sentry:sentry-android:2.0.2'
    // AppCompat for AppCompatActivity
    implementation "androidx.appcompat:appcompat:$androidxAppCompatVersion"
}
